1. Instal·lem Apache i MariaDB
   sudo apt install apache2 mariadb-server -y

2. Afegim el repositori per a PHP

sudo apt install ca-certificates apt-transport-https software-properties-common
sudo add-apt-repository ppa:ondrej/php

3. Fem l’actualització dels paquets
   sudo apt update -y && sudo apt upgrade -y

4. Instal·lem PHP 8 o 8.1 i les extensions

PHP8
sudo apt install php8.0 libapache2-mod-php8.0 php8.0-common php8.0-fpm php8.0-cgi php8.0-bcmath php8.0-gd php8.0-imap php8.0-intl php8.0-apcu php8.0-cli php8.0-mbstring php8.0-curl php8.0-mysql php8.0-xml unzip -y

PHP8.1
sudo apt install php8.1 libapache2-mod-php8.1 php8.1-common php8.1-fpm php8.1-cgi php8.1-bcmath php8.1-gd php8.1-imap php8.1-intl php8.1-apcu php8.1-cli php8.1-mbstring php8.1-curl php8.1-mysql php8.1-xml unzip -y

PHP8.3
sudo apt install php8.3 libapache2-mod-php8.3 php8.3-common php8.3-fpm php8.3-cgi php8.3-bcmath php8.3-gd php8.3-imap php8.3-intl php8.3-apcu php8.3-cli php8.3-mbstring php8.3-curl php8.3-mysql php8.3-xml unzip -y

5. Comprovem la instal·lació de PHP
   php -v i reiniciem Apache

sudo systemctl restart apache2

7. Permetre l’accés a MySQL des de fora del local
   Editar aquest fitxer i modificar la línia:
   bind-address = 0.0.0.0

sudo nano /etc/mysql/mariadb.conf.d/50-server.cnf

------------------DOCUMENTACIÓ ZABBIX---------------------------------------

a) Instal·lar el repositori de Zabbix

sudo wget [https://repo.zabbix.com/zabbix/6.4/ubuntu/pool/main/z/zabbix-release/zabbix-release_6.4-1+ubuntu22.04_all.deb](https://repo.zabbix.com/zabbix/6.4/ubuntu/pool/main/z/zabbix-release/zabbix-release_6.4-1+ubuntu22.04_all.deb)
sudo dpkg -i zabbix-release_6.4-1+ubuntu22.04_all.deb
sudo apt update

b) Instal·lar el servidor, la interfície i l’agent de Zabbix

sudo apt install zabbix-server-mysql zabbix-frontend-php zabbix-apache-conf zabbix-sql-scripts zabbix-agent

c) Crear la base de dades inicial

Assegura’t que el servidor de base de dades està en funcionament.

Executa el següent al host de la base de dades:

sudo mysql -uroot -p
password
mysql> create database zabbix character set utf8mb4 collate utf8mb4_bin;
mysql> create user zabbix@localhost identified by 'password';
mysql> grant all privileges on zabbix.* to zabbix@localhost;
mysql> set global log_bin_trust_function_creators = 1;
mysql> quit;

Al servidor Zabbix, importa l’esquema i les dades inicials. Es demanarà la contrasenya creada anteriorment.

sudo zcat /usr/share/zabbix-sql-scripts/mysql/server.sql.gz | mysql --default-character-set=utf8mb4 -uzabbix -p zabbix

Desactivar l’opció log_bin_trust_function_creators després d’importar l’esquema:

sudo mysql -uroot -p
password
mysql> set global log_bin_trust_function_creators = 0;
mysql> quit;

d) Configurar la base de dades per al servidor Zabbix

Editar el fitxer:

sudo nano /etc/zabbix/zabbix_server.conf

Modificar la línia:

DBPassword=password

e) Iniciar els processos de l’agent i del servidor Zabbix

sudo systemctl restart zabbix-server zabbix-agent apache2
sudo systemctl enable zabbix-server zabbix-agent apache2

f) Obrir la interfície web de Zabbix

La URL per defecte de la interfície web de Zabbix amb Apache és:

[http://host/zabbix](http://host/zabbix)

------------SOLUCIONAR ERROR D’IDIOMA----------------------------------------

ERROR D’IDIOMA DESPRÉS D’INSTAL·LAR ZABBIX

sudo dpkg-reconfigure locales
Escollir en_US.utf8

sudo systemctl restart zabbix-server.service
sudo systemctl restart zabbix-agent.service
sudo systemctl restart apache2

-------------NOTES REPOSITORIS ZABBIX A UBUNTU ARM----------------

sudo wget [https://repo.zabbix.com/zabbix/6.2/ubuntu-arm64/pool/main/z/zabbix-release/zabbix-release_6.2-2%2Bubuntu22.04_all.deb](https://repo.zabbix.com/zabbix/6.2/ubuntu-arm64/pool/main/z/zabbix-release/zabbix-release_6.2-2%2Bubuntu22.04_all.deb)
sudo dpkg -i zabbix-release_6.2-2+ubuntu22.04_all.deb
sudo apt update
